import{f}from"./vendor.595f6ddc.js";const b=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}};b();const h={apiKey:"AIzaSyAtclq-8nyPnU9jTovmZTtiAaPQw21tNlU",authDomain:"neuron-app-51ea5.firebaseapp.com",projectId:"neuron-app-51ea5",storageBucket:"neuron-app-51ea5.appspot.com",messagingSenderId:"620313616367",appId:"1:620313616367:web:5e3f3dc0c51f12c8d3201a",measurementId:"G-0RRSRQXVZ7"};f.apps.length||f.initializeApp(h);const m=f.firestore(),D={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10},n=new RTCPeerConnection(D);let l=null,p=null;const w=document.getElementById("webcamButton"),B=document.getElementById("webcamVideo"),g=document.getElementById("callButton"),y=document.getElementById("callInput"),C=document.getElementById("answerButton"),S=document.getElementById("remoteVideo"),E=document.getElementById("hangupButton");w.onclick=async()=>{l=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),p=new MediaStream,l.getTracks().forEach(a=>{n.addTrack(a,l)}),n.ontrack=a=>{a.streams[0].getTracks().forEach(c=>{p.addTrack(c)})},B.srcObject=l,S.srcObject=p,g.disabled=!1,C.disabled=!1,w.disabled=!0};g.onclick=async()=>{const a=m.collection("calls").doc(),c=a.collection("offerCandidates"),i=a.collection("answerCandidates");y.value=a.id,n.onicecandidate=e=>{e.candidate&&c.add(e.candidate.toJSON())};const s=await n.createOffer();await n.setLocalDescription(s);const t={sdp:s.sdp,type:s.type};await a.set({offer:t}),a.onSnapshot(e=>{const o=e.data();if(!n.currentRemoteDescription&&(o==null?void 0:o.answer)){const d=new RTCSessionDescription(o.answer);n.setRemoteDescription(d)}}),i.onSnapshot(e=>{e.docChanges().forEach(o=>{if(o.type==="added"){const d=new RTCIceCandidate(o.doc.data());n.addIceCandidate(d)}})}),E.disabled=!1};C.onclick=async()=>{const a=y.value,c=m.collection("calls").doc(a),i=c.collection("answerCandidates"),s=c.collection("offerCandidates");n.onicecandidate=r=>{r.candidate&&i.add(r.candidate.toJSON())};const e=(await c.get()).data().offer;await n.setRemoteDescription(new RTCSessionDescription(e));const o=await n.createAnswer();await n.setLocalDescription(o);const d={type:o.type,sdp:o.sdp};await c.update({answer:d}),s.onSnapshot(r=>{r.docChanges().forEach(u=>{if(console.log(u),u.type==="added"){let I=u.doc.data();n.addIceCandidate(new RTCIceCandidate(I))}})})};
